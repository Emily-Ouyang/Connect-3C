<template>
  <div class="wrap" id="wrap">
  <NavbarFront></NavbarFront>
  <Carousel></Carousel>

  <div class="mb-4 animated">
    <img src="~@/assets/img/banner.png" class="banner-img">
  </div>

  <section id="advantage" class="bg-gradient1 text-white section-rotate">
  <div class="section-rotate-fixed">
    <div class="container py-3 animatedX">
      <h2 class="text-center mb-4">
        服務品質三冠王 👑
      </h2>
      <div class="row">
        <div class="col-half animated">
          <h3 class="text-center my-4">
            我們的優勢
          </h3>
          <p>
            我們販售的手機，皆是全新原廠公司貨。款式齊全且價格比官方便宜，並享有一年保固及基本配件。購買手機後若出現異常狀況，我們也會協助送修，讓您買得安心有保障!
            同時不定期推出各式優惠活動，替您節省荷包。<br><br>
            想要擁有心儀手機，就來 Connect 3C !
          </p>
        </div>

        <div class="col-half animatedX">
          <div class="mb-3">
            <span>挑戰市場最低價</span>
            <div class="progress">
              <div class="progress-bar" data-progress="100">
                100
              </div>
            </div>
          </div>

          <div class="mb-3">
            <span>手機款式最齊全</span>
            <div class="progress">
              <div class="progress-bar" data-progress="100">
                100
              </div>
            </div>
          </div>

          <div class="mb-3">
            <span>售後服務最到位</span>
            <div class="progress">
              <div class="progress-bar" data-progress="100">
                100
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

  <div class="my-5 animated">
    <h2 class="text-center">
      我們不只賣手機<br>
      維修也是一把罩🔧
    </h2>
  </div>

  <!-- 維修項目區塊 -->
  <div class="my-5 bg-white animatedX">
    <h4 class="text-center pt-5 pb-4">維修項目致力於</h4>
        <div class="container">
            <div class="row">
                <div class="col-xl-4 col-lg-6 col-md-6 col-sm-12 col-xs-12 animated">
                    <div class="intro-box">
                        <div class="py-3 animated">
                            <img src="~@/assets/img/維修1.jpg" class="intro-img">
                        </div>
                        <h3 class="intro-h3 mt-3 animatedX">電池維修服務</h3>
                        <div class="intro-line animatedX"></div>
                        <p class="intro-p mt-4 animatedX">
                            電池膨脹、電量不準確、耗電<br>
                            手機發燙、手機自動重開機等<br>
                            舉凡任何電池問題，我們都修
                        </p>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-6 col-md-6 col-sm-12 col-xs-12 animatedX">
                    <div class="intro-box">
                        <div class="py-3 animatedX">
                            <img src="~@/assets/img/維修2.jpg" class="intro-img">
                        </div>
                        <h3 class="intro-h3 mt-3 animated">螢幕維修服務</h3>
                        <div class="intro-line animated"></div>
                        <p class="intro-p mt-4 animated">
                            您的螢幕發生損壞破碎、產生線條<br>
                            觸控不良等問題時，莫害怕!<br>
                            螢幕的健康，交給我們來拯救~
                        </p>
                    </div>
                </div>
                <div class="col-xl-4 col-lg-12 col-md-12 col-sm-12 col-xs-12 animated">
                    <div class="intro-box">
                        <div class="py-3 animated">
                            <img src="~@/assets/img/維修3.jpg" class="intro-img">
                        </div>
                        <h3 class="intro-h3 mt-3 animatedX">電源故障維修</h3>
                        <div class="intro-line animatedX"></div>
                        <p class="intro-p mt-4 animatedX">
                            完蛋!手機突然開不了機!?<br>
                            簡直就是低頭族的世界末日!<br>
                            別擔心~維修後讓您重獲光明
                        </p>
                    </div>
                </div>
            </div>
            </div>
          </div>
    <!-- 維修項目區塊結束 -->

  <div class="my-5">
    <h2 class="text-center mb-4 animated">
      江湖在走 手機保險要有💪
    </h2>

    <div class="container">      
      <div class="row p-3">
        <div class="col-md col-12 animatedX">
          <img src="~@/assets/img/手機保險1.png" class="img-fluid my-3">
        </div>
        <div class="col d-flex flex-column justify-content-center align-items-center text-center mt-2">
          <h4 class="mb-3 animatedX">手機保險 ‧ 絕機重生</h4>
          <p class="animated">
            五分鐘完成申請<br>
            每天只需花三元<br>
            上千元維修費免負擔<br><br>
            經常不小心手滑的您<br>
            不必再擔心寶貝手機意外受傷<br>
            少少的負擔，多重的保障<br>
            快來給手機套上最厲害的金鐘罩~
          </p>
        </div>
      </div>

      <div class="row p-3 gx-4 d-flex flex-md-row-reverse">
        <div class="col-md col-12 animatedX">
          <img src="~@/assets/img/手機保險2.png" class="img-fluid my-3">
        </div>
        <div class="col d-flex flex-column align-items-center justify-content-center text-center mt-2">
          <h4 class="mb-3 animated">購買手機保險的優點?</h4>
          <p class="animatedX">
            「人為損壞」情況下免費維修✔️<br>
            一年三次原機維修或置換新機✔️<br>
            每天花三元，享新機兩年保固✔️
          </p>
        </div>
      </div>
    </div>
  </div>

  <div>
    <img src="~@/assets/img/coupon-banner.jpg" class="banner-img animatedX">
  </div>

  <div class="bg-color animated">
    <h2 class="text-center pt-5 pb-4 animated">
      等等!舊手機先別急著丟🚫
    </h2>

    <h5 class="text-center mb-2 animated">
      以舊換新 價格甘心
    </h5>

    <h5 class="text-center mb-5 animatedX">
      舊機換新機 折扣享不停💰
    </h5>

    <img src="~@/assets/img/舊機換新機.png" class="banner-img animated">
  </div>

  <div>
    <img src="~@/assets/img/banner-last.png" class="banner-img animatedX">
  </div>

  <Footer></Footer>
</div>
</template>

<style lang="scss">
  /* 背景圖片樣式設定 */
  .wrap {
    overflow: hidden;
    background-image: url('https://www.toptal.com/designers/subtlepatterns/uploads/double-bubble-outline.png');
    // 固定背景圖(當頁面滾動時，視覺上會有交錯的效果)
    background-attachment: fixed;
  }

  /* 首頁banner樣式設定 */
  .banner-img {
    display: block;
    margin: auto;
    max-width: 100%;
  }

  /* 服務品質三冠王區塊樣式設定 */
  .bg-gradient1 {
  background-image: linear-gradient(45deg,#59f0ff,#039dff);
  }

  .section-rotate {
  transform: rotate(-7deg);
  margin-left: -80px;
  margin-right: -80px;
  padding: 35px 80px 35px 80px;
  }

  .section-rotate-fixed {
  transform: rotate(7deg);
  height: 310px;
  }
  /* RWD響應式網頁設計 */
  /* 912px以下時高度自適應 */
  @media(max-width:912px) {
  .section-rotate-fixed {
    height: auto;
  }
}

  .col-half {
  float: left;
  padding-left: 20px;
  padding-right: 20px;
  width: 50%;
  }
  /* RWD響應式網頁設計 */
  /* 767px以下時改為直式排版 */
  @media(max-width:767px) {
  .col-half {
    float: none;
    width: 100%;
  }
}

  /* 進度條樣式設定 */
  .progress {
  height: 20px;
  overflow: hidden;
  background-color: rgba(#fafafa, .45);
  border-radius: 3px;
  box-shadow: inset 0 1px 2px rgba(0,0,0,.1);
  position: relative;
  }

  .progress-bar {
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 0;
  font-size: 12px;
  line-height: 20px;
  color: #fff;
  text-align: center;
  background-color: #e26789;
  box-shadow: inset 0 -1px 0 rgba(0,0,0,.15);
// 補上寬度時，才有動態效果
  transition: width 2s ease;
  }

  /* 區塊背景顏色 */
  .bg-color {
    background: #ffffff;
  }

  /* 維修項目區塊 */
  /* 維修項目內容區塊樣式設定 */
  .intro-box {
    border-radius: 15px;
    margin-bottom: 15px;
    transition: all .5s ease-out;
    padding: 15px 15px;
    text-align: center;
  }

  /* 維修項目內容區塊hover特效增加外陰影 */
  .intro-box:hover {
    box-shadow: 0px 22px 22px rgba(0,0,0,.25);
  }

  /* 維修項目區塊圖片樣式設定 */
  .intro-img {
    max-width: 100%;
    height: 300px;
  }

  /* 內容h3標題文字顏色 */
  .intro-h3 {
    color: RosyBrown;
  }

  /* 內容h3標題下方線條 */
  .intro-line {
    width: 165px;
    height: 4px;
    border-radius: 3px;
    margin: 10px auto;
    transition: all .5s ease;
    background-color: SandyBrown;
  }

  /* 內容h3標題下方線條hover特效增加寬高 */
  .intro-box:hover .intro-line {
    width: 175px;
    height: 5px;
  }

  /* p段落文字顏色 */
  .intro-p {
    color: DarkGoldenrod;
  }
/* 維修項目區塊結束 */

  // 滾動套用css效果
  .animated {
  // 將透明度設為0來隱藏區塊
  opacity: 0;

  // 產生漸變效果
  transition: all 1.5s;

  // 元素向下移70px
  transform: translateY(70px);
  }

  .fadeIn {
  // 將透明度設為1來顯示區塊
  opacity: 1;

  // fadeIn後，元素從下移70px處，回到原本的位置
  transform: translateY(0);
  }

  .animatedX {
  // 將透明度設為0來隱藏區塊
  opacity: 0;

  // 產生漸變效果
  transition: all 1.5s;

  // 元素向右移60px
  transform: translateX(60px);
  }

  .fadeInX {
  // 將透明度設為1來顯示區塊
  opacity: 1;

  // fadeInX後，元素從右移60px處，回到原本的位置
  transform: translateX(0);
  }
</style>

<script>
import NavbarFront from '@/components/NavbarFront.vue';
import Carousel from '@/components/Carousel.vue';
import Footer from '@/components/Footer.vue';

export default {
  name: 'Home',

  data() {
    return {
      showAdv: false
    }
  },

  components: {
    NavbarFront,
    Carousel,
    Footer
  },

  methods: {
    handleScroll() {
// 偵測 當下網頁可視範圍的視窗大小 之中，網頁右邊卷軸至網頁頂端的距離
var scrollPosition = $(window).scrollTop();

// 偵測 當下網頁可視範圍的視窗高度
var windowHeight = $(window).height();

// 動態顯示的進度條
// 讀出 服務品質三冠王 此區塊的高度     
var advTop = $('#advantage').position().top;

// 當滾動位置超過服務品質三冠王區塊時觸發事件
// 為了解決顯示時間延遲問題，必須把視窗高度除2以提早顯示出效果
if (advTop <= (scrollPosition + windowHeight / 2) && !this.showAdv) {
// 特效已執行，改為true以後不符合判斷式條件，因此不會再次執行此function
this.showAdv = true;

$('#advantage .progress-bar').each(function(){
// 讀出每個.progress-bar裡面的值
var thisValue = $(this).data('progress');

// 將讀取出的值(各進度條%數)加進css裡
$(this).css('width',thisValue + '%');
});
}

// 使用each，把動態效果讀進來
$('.animated').each(function(){
// $(this).offset().top:取得該元素位置的y軸座標
var thisPosition = $(this).offset().top;

// 當下網頁可視範圍的視窗高度 + 網頁右邊卷軸至網頁頂端的距離 >= 該元素位置的y軸座標
if((windowHeight + scrollPosition >= thisPosition)){
    // 動態替元素新增一個名為fadeIn的class
    $(this).addClass('fadeIn');
}
});

// 使用each，把動態效果讀進來
$('.animatedX').each(function(){
// $(this).offset().top:取得該元素位置的y軸座標
var thisPosition = $(this).offset().top;

// 當下網頁可視範圍的視窗高度 + 網頁右邊卷軸至網頁頂端的距離 >= 該元素位置的y軸座標
if((windowHeight + scrollPosition >= thisPosition)){
    // 動態替元素新增一個名為fadeInX的class
    $(this).addClass('fadeInX');
}
});

// 滾動中持續改變物件位置(css transform)
// 設負值會往反方向移動
$('#wrap').css('background-position-y',-(scrollPosition / 2) + 'px')

    }
  },

  unmounted() {
    $(window).off('scroll',this.handleScroll);

    this.showAdv = false;
  },

  mounted() {
    $(window).on('scroll',this.handleScroll);
  }
};
</script>