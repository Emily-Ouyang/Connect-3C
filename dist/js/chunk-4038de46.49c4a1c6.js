(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4038de46"],{"159d":function(e,t,l){"use strict";l.r(t);var c=l("7a23");const a=Object(c["createElementVNode"])("div",{class:"loadingio-spinner-spin-69aofg588hf"},[Object(c["createElementVNode"])("div",{class:"ldio-4g11ls18ra"},[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div")])])],-1),n={class:"table mt-4"},r=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",null,"購買時間"),Object(c["createElementVNode"])("th",null,"Email"),Object(c["createElementVNode"])("th",null,"購買款項"),Object(c["createElementVNode"])("th",null,"應付金額"),Object(c["createElementVNode"])("th",null,"是否付款"),Object(c["createElementVNode"])("th",null,"編輯")])],-1),o=["textContent"],d={class:"list-unstyled"},i={class:"text-right"},s={class:"form-check form-switch"},b=["id","onUpdate:modelValue","onChange"],m=["for"],O={key:0},j={key:1},p={class:"btn-group"},u=["onClick"],E=Object(c["createElementVNode"])("i",{class:"bi bi-search"},null,-1),N=[E],V=["onClick"],h=Object(c["createElementVNode"])("i",{class:"bi bi-trash"},null,-1),g=[h];function k(e,t,l,E,h,k){const y=Object(c["resolveComponent"])("Loading"),v=Object(c["resolveComponent"])("OrderModal"),f=Object(c["resolveComponent"])("DelModal"),B=Object(c["resolveComponent"])("Pagination");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(y,{active:h.isLoading},{default:Object(c["withCtx"])(()=>[a]),_:1},8,["active"]),Object(c["createElementVNode"])("table",n,[r,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(h.orders,(t,l)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:l},[h.orders.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:0,class:Object(c["normalizeClass"])({"text-secondary":!t.is_paid})},[Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(c["createElementVNode"])("td",null,[t.user?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",{key:0,textContent:Object(c["toDisplayString"])(t.user.email)},null,8,o)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("ul",d,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.products,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{key:t},Object(c["toDisplayString"])(e.product.title)+" 數量："+Object(c["toDisplayString"])(e.qty)+" "+Object(c["toDisplayString"])(e.product.unit),1))),128))])]),Object(c["createElementVNode"])("td",i,Object(c["toDisplayString"])(t.total),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",s,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch"+t.id,"onUpdate:modelValue":e=>t.is_paid=e,onChange:e=>k.updatePaid(t)},null,40,b),[[c["vModelCheckbox"],t.is_paid]]),Object(c["createElementVNode"])("label",{class:"form-check-label",for:"paidSwitch"+t.id},[t.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",O,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",j,"未付款"))],8,m)])]),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",p,[Object(c["createElementVNode"])("button",{class:"btn btn-outline-primary btn-sm",onClick:e=>k.openModal(!1,t)},N,8,u),Object(c["createElementVNode"])("button",{class:"btn btn-outline-danger btn-sm",onClick:e=>k.openDelOrderModal(t)},g,8,V)])])],2)):Object(c["createCommentVNode"])("",!0)],64))),128))])]),Object(c["createVNode"])(v,{order:h.tempOrder,ref:"orderModal",onUpdatePaid:k.updatePaid},null,8,["order","onUpdatePaid"]),Object(c["createVNode"])(f,{item:h.tempOrder,ref:"delModal",onDelItem:k.delOrder},null,8,["item","onDelItem"]),Object(c["createVNode"])(B,{pages:h.pagination,onEmitPages:k.getOrders},null,8,["pages","onEmitPages"])],64)}var y=l("6ff1");const v={class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},f={class:"modal-dialog modal-xl",role:"document"},B={class:"modal-content border-0"},x=Object(c["createElementVNode"])("div",{class:"modal-header bg-primary text-white"},[Object(c["createElementVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["createElementVNode"])("span",null,"訂單細節")]),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close bg-white mx-1","data-bs-dismiss":"modal","aria-label":"Close"})],-1),C={class:"modal-body"},D={class:"row"},M={class:"col-md-4"},w=Object(c["createElementVNode"])("h3",null,"用戶資料",-1),P={class:"table"},_={key:0},S=Object(c["createElementVNode"])("th",{style:{width:"100px"}},"姓名",-1),$=Object(c["createElementVNode"])("th",null,"Email",-1),L=Object(c["createElementVNode"])("th",null,"電話",-1),F=Object(c["createElementVNode"])("th",null,"地址",-1),z={class:"col-md-8"},U=Object(c["createElementVNode"])("h3",null,"訂單細節",-1),q={class:"table"},I=Object(c["createElementVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),J=Object(c["createElementVNode"])("th",null,"下單時間",-1),T=Object(c["createElementVNode"])("th",null,"付款時間",-1),A={key:0},G={key:1},H=Object(c["createElementVNode"])("th",null,"付款狀態",-1),K={key:0,class:"text-success"},Q={key:1,class:"text-muted"},R=Object(c["createElementVNode"])("th",null,"總金額",-1),W=Object(c["createElementVNode"])("h3",null,"選購商品",-1),X={class:"table"},Y=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr")],-1),Z={class:"text-end"},ee={class:"modal-footer"},te=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},[Object(c["createElementVNode"])("i",{class:"bi bi-x-circle-fill"}),Object(c["createTextVNode"])(" 取消 ")],-1),le=Object(c["createElementVNode"])("i",{class:"bi bi-check-circle-fill"},null,-1),ce=Object(c["createTextVNode"])(" 確認訂單 "),ae=[le,ce];function ne(e,t,l,a,n,r){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",v,[Object(c["createElementVNode"])("div",f,[Object(c["createElementVNode"])("div",B,[x,Object(c["createElementVNode"])("div",C,[Object(c["createElementVNode"])("div",D,[Object(c["createElementVNode"])("div",M,[w,Object(c["createElementVNode"])("table",P,[n.tempOrder.user?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tbody",_,[Object(c["createElementVNode"])("tr",null,[S,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempOrder.user.name),1)]),Object(c["createElementVNode"])("tr",null,[$,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempOrder.user.email),1)]),Object(c["createElementVNode"])("tr",null,[L,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempOrder.user.tel),1)]),Object(c["createElementVNode"])("tr",null,[F,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempOrder.user.address),1)])])):Object(c["createCommentVNode"])("",!0)])]),Object(c["createElementVNode"])("div",z,[U,Object(c["createElementVNode"])("table",q,[Object(c["createElementVNode"])("tbody",null,[Object(c["createElementVNode"])("tr",null,[I,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(n.tempOrder.id),1)]),Object(c["createElementVNode"])("tr",null,[J,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.date(n.tempOrder.create_at)),1)]),Object(c["createElementVNode"])("tr",null,[T,Object(c["createElementVNode"])("td",null,[n.tempOrder.paid_date?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",A,Object(c["toDisplayString"])(e.$filters.date(n.tempOrder.paid_date)),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",G,"時間不正確"))])]),Object(c["createElementVNode"])("tr",null,[H,Object(c["createElementVNode"])("td",null,[n.tempOrder.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("strong",K,"已付款")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Q,"尚未付款"))])]),Object(c["createElementVNode"])("tr",null,[R,Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.currency(n.tempOrder.total)),1)])])]),W,Object(c["createElementVNode"])("table",X,[Y,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(n.tempOrder.products,t=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.id},[Object(c["createElementVNode"])("th",null,Object(c["toDisplayString"])(t.product.title),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.qty)+" / "+Object(c["toDisplayString"])(t.product.unit),1),Object(c["createElementVNode"])("td",Z,Object(c["toDisplayString"])(e.$filters.currency(t.final_total)),1)]))),128))])])])])]),Object(c["createElementVNode"])("div",ee,[te,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=t=>e.$emit("update-order",n.tempOrder))},ae)])])])],512)}var re=l("e0ae"),oe={name:"orderModal",props:{order:{type:Object,default(){return{}}}},data(){return{status:{},modal:"",tempOrder:{},isPaid:!1}},emits:["update-product"],mixins:[re["a"]],inject:["emitter"],watch:{order(){this.tempOrder=this.order,this.isPaid=this.tempOrder.is_paid}}},de=l("6b0d"),ie=l.n(de);const se=ie()(oe,[["render",ne]]);var be=se,me=l("1799"),Oe={data(){return{orders:{},isNew:!1,pagination:{},isLoading:!1,tempOrder:{},currentPage:1}},components:{Pagination:me["a"],DelModal:y["a"],OrderModal:be},methods:{getOrders(e=1){this.currentPage=e;const t="https://vue3-course-api.hexschool.io/api/store-api/admin/orders?page="+e;this.isLoading=!0,this.$http.get(t,this.tempProduct).then(e=>{this.orders=e.data.orders,this.pagination=e.data.pagination,this.isLoading=!1})},openModal(e,t){this.tempOrder={...t},this.isNew=!1;const l=this.$refs.orderModal;l.showModal()},openDelOrderModal(e){this.tempOrder={...e};const t=this.$refs.delModal;t.showModal()},updatePaid(e){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/store-api/admin/order/"+e.id,l={is_paid:e.is_paid};this.$http.put(t,{data:l}).then(e=>{this.isLoading=!1,this.getOrders(this.currentPage),this.$httpMessageState(e,"更新付款狀態")})},delOrder(){const e="https://vue3-course-api.hexschool.io/api/store-api/admin/order/"+this.tempOrder.id;this.isLoading=!0,this.$http.delete(e).then(e=>{const t=this.$refs.delModal;t.hideModal(),this.getOrders(this.currentPage)})}},created(){this.getOrders()}};l("2ebd");const je=ie()(Oe,[["render",k]]);t["default"]=je},1799:function(e,t,l){"use strict";var c=l("7a23");const a={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},r=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),o=[r],d=["onClick"],i=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),s=[i];function b(e,t,l,r,i,b){return Object(c["openBlock"])(),Object(c["createElementBlock"])("nav",a,[Object(c["createElementVNode"])("ul",n,[Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:1===l.pages.current_page}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(c["withModifiers"])(e=>b.prePage(l.pages),["prevent"]))},o)],2),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(l.pages.total_pages,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{class:Object(c["normalizeClass"])(["page-item",{active:e===l.pages.current_page}]),key:e},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#",onClick:Object(c["withModifiers"])(t=>b.updatePage(e),["prevent"])},Object(c["toDisplayString"])(e),9,d)],2))),128)),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:l.pages.current_page>=l.pages.total_pages}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(c["withModifiers"])(e=>b.nextPage(l.pages),["prevent"]))},s)],2)])])}var m={props:["pages"],methods:{prePage(e){!0===e.has_pre&&this.$emit("emit-pages",e.current_page-1)},updatePage(e){this.$emit("emit-pages",e)},nextPage(e){!0===e.has_next&&this.$emit("emit-pages",e.current_page+1)}}},O=l("6b0d"),j=l.n(O);const p=j()(m,[["render",b]]);t["a"]=p},"2ebd":function(e,t,l){"use strict";l("918e")},"918e":function(e,t,l){}}]);
//# sourceMappingURL=chunk-4038de46.49c4a1c6.js.map