(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8686db4a"],{2601:function(e,t,c){"use strict";c("9be0")},"76db":function(e,t,c){"use strict";c.r(t);var o=c("7a23");const a=Object(o["createElementVNode"])("div",{class:"loadingio-spinner-spin-69aofg588hf"},[Object(o["createElementVNode"])("div",{class:"ldio-4g11ls18ra"},[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")])])],-1),n={class:"container userPage"},l={class:"dropdown text-end mb-3"},s=Object(o["createElementVNode"])("a",{type:"button position-relative p-2","data-bs-toggle":"dropdown","data-bs-auto-close":"outside"},[Object(o["createElementVNode"])("i",{class:"bi bi-cart-fill"})],-1),d={class:"dropdown-menu p-2 overflow-auto"},i=Object(o["createElementVNode"])("p",{class:"text-center mt-2 mb-5"},"購物車清單",-1),r={class:"col-md-12"},b={class:"sticky-top"},u={class:"table align-middle"},p=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th"),Object(o["createElementVNode"])("th",null,"品名"),Object(o["createElementVNode"])("th",{style:{width:"110px"}},"數量"),Object(o["createElementVNode"])("th",null,"單價")])],-1),m=["disabled","onClick"],j=Object(o["createElementVNode"])("i",{class:"bi bi-trash3-fill"},null,-1),O=[j],h={key:0,class:"text-success"},g={class:"input-group input-group-sm"},V=["disabled","onChange","onUpdate:modelValue"],N={class:"input-group-text"},E={class:"text-end"},v={key:0,class:"text-success"},k=Object(o["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),y={class:"text-end"},C={key:0},x=Object(o["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),f={class:"text-end text-success"},w={class:"input-group mb-3 input-group-sm"},B={class:"input-group-append"},I=["disabled"],L={class:"row"},$={class:"card mb-4"},_={class:"card-body text-center mt-2"},S={class:"card-title"},D=Object(o["createElementVNode"])("br",null,null,-1),M={key:0,class:"h6"},T=Object(o["createElementVNode"])("br",null,null,-1),q={key:1,class:"h5"},P={class:"btn-group btn-group-sm mt-3"},U=["onClick"],F=Object(o["createElementVNode"])("i",{class:"bi bi-box-arrow-up-right"},null,-1),z=Object(o["createTextVNode"])(" 商品詳情 "),J=[F,z],A=["onClick","disabled"],G={key:0,class:"spinner-grow spinner-grow-sm text-primary",role:"status"},H=Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),K=[H],Q=Object(o["createElementVNode"])("i",{class:"bi bi-cart-plus"},null,-1),R=Object(o["createTextVNode"])(" 心動購買 ");function W(e,t,c,j,F,z){const H=Object(o["resolveComponent"])("Loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(H,{active:e.isLoading},{default:Object(o["withCtx"])(()=>[a]),_:1},8,["active"]),Object(o["createElementVNode"])("div",n,[Object(o["createElementVNode"])("div",l,[s,Object(o["createElementVNode"])("div",d,[i,Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("table",u,[p,Object(o["createElementVNode"])("tbody",null,[F.cart.carts?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(F.cart.carts,t=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t.id},[Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:F.status.loadingItem===t.id,onClick:Object(o["withModifiers"])(e=>z.removeCartItem(t.id),["prevent"])},O,8,m)]),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h," 已套用優惠券 ")):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",g,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"number",class:"form-control",min:"1",disabled:t.id===F.status.loadingItem,onChange:e=>z.updateCart(t),"onUpdate:modelValue":e=>t.qty=e},null,40,V),[[o["vModelText"],t.qty,void 0,{number:!0}]]),Object(o["createElementVNode"])("div",N,"/ "+Object(o["toDisplayString"])(t.product.unit),1)])]),Object(o["createElementVNode"])("td",E,[F.cart.final_total!==F.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("small",v,"折扣價：")):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.$filters.currency(t.final_total)),1)])]))),128)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("tfoot",null,[Object(o["createElementVNode"])("tr",null,[k,Object(o["createElementVNode"])("td",y,Object(o["toDisplayString"])(e.$filters.currency(F.cart.total)),1)]),F.cart.final_total!==F.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",C,[x,Object(o["createElementVNode"])("td",f,Object(o["toDisplayString"])(e.$filters.currency(F.cart.final_total)),1)])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",w,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>F.coupon_code=e),placeholder:"請輸入優惠碼"},null,512),[[o["vModelText"],F.coupon_code]]),Object(o["createElementVNode"])("div",B,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=Object(o["withModifiers"])((...e)=>z.addCouponCode&&z.addCouponCode(...e),["prevent"]))}," 套用優惠碼 ")])]),Object(o["createElementVNode"])("button",{class:"btn btn-primary mb-2 w-100",type:"button",disabled:0===F.cart.total,onClick:t[2]||(t[2]=Object(o["withModifiers"])((...e)=>z.goInfo&&z.goInfo(...e),["prevent"]))},"結帳去",8,I)])])])]),Object(o["createElementVNode"])("div",L,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(F.products,e=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:"col-xl-4 col-lg-4 col-md-6 col-sm-12 col-xs-12",key:e.id},[Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])([{height:"350px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4),Object(o["createElementVNode"])("div",_,[Object(o["createElementVNode"])("h5",S,Object(o["toDisplayString"])(e.title),1),D,e.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("del",M," 市價 "+Object(o["toDisplayString"])(e.origin_price)+" 元 ",1)):Object(o["createCommentVNode"])("",!0),T,e.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",q," 限時下殺 "+Object(o["toDisplayString"])(e.price)+" 元 ",1)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",P,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-warning",onClick:Object(o["withModifiers"])(t=>z.getProduct(e.id),["prevent"])},J,8,U),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-danger",onClick:Object(o["withModifiers"])(t=>z.addCart(e.id),["prevent"]),disabled:this.status.loadingItem===e.id},[this.status.loadingItem===e.id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",G,K)):Object(o["createCommentVNode"])("",!0),Q,R],8,A)])])])]))),128))])])],64)}c("14d9");var X={data(){return{products:[],product:{},status:{loadingItem:""},cart:{},coupon_code:""}},methods:{getProducts(){const e="https://vue3-course-api.hexschool.io/api/store-api/products/all";this.isLoading=!0,this.$http.get(e).then(e=>{this.products=e.data.products,this.isLoading=!1})},getProduct(e){this.$router.push("/user/product/"+e)},addCart(e){const t="https://vue3-course-api.hexschool.io/api/store-api/cart";this.status.loadingItem=e;const c={product_id:e,qty:1};this.$http.post(t,{data:c}).then(e=>{this.status.loadingItem="",this.getCart()})},removeCartItem(e){this.status.loadingItem=e;const t="https://vue3-course-api.hexschool.io/api/store-api/cart/"+e;this.isLoading=!0,this.$http.delete(t).then(e=>{this.$httpMessageState(e,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1})},updateCart(e){const t="https://vue3-course-api.hexschool.io/api/store-api/cart/"+e.id;this.isLoading=!0,this.status.loadingItem=e.id;const c={product_id:e.product_id,qty:e.qty};this.$http.put(t,{data:c}).then(e=>{this.status.loadingItem="",this.getCart(),this.isLoading=!1})},getCart(){const e="https://vue3-course-api.hexschool.io/api/store-api/cart";this.isLoading=!0,this.$http.get(e).then(e=>{this.cart=e.data.data,this.isLoading=!1})},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/store-api/coupon",t={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:t}).then(e=>{this.$httpMessageState(e,"套用優惠碼"),this.getCart(),this.isLoading=!1})},goInfo(){this.$router.push("/user/information")}},created(){this.getProducts(),this.getCart()}},Y=(c("2601"),c("6b0d")),Z=c.n(Y);const ee=Z()(X,[["render",W]]);t["default"]=ee},"9be0":function(e,t,c){}}]);
//# sourceMappingURL=chunk-8686db4a.67c4ef01.js.map