(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b495aa9"],{5547:function(e,t,c){},bd4c:function(e,t,c){"use strict";c.r(t);var a=c("7a23");const l=Object(a["createElementVNode"])("div",{class:"loadingio-spinner-spin-69aofg588hf"},[Object(a["createElementVNode"])("div",{class:"ldio-4g11ls18ra"},[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")]),Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div")])])],-1),o={class:"my-5 row justify-content-center"},s={class:"col-lg-6 col-md-12 col-sm-12 mb-5 px-4"},n=Object(a["createElementVNode"])("h3",{class:"text-center mb-5"}," 確認訂購明細 ",-1),d={class:"sticky-top"},r={class:"table align-middle"},i=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th"),Object(a["createElementVNode"])("th",null,"品名"),Object(a["createElementVNode"])("th",{style:{width:"110px"}},"數量"),Object(a["createElementVNode"])("th",null,"單價")])],-1),m=["disabled","onClick"],b=Object(a["createElementVNode"])("i",{class:"bi bi-trash3-fill"},null,-1),u=[b],p={key:0,class:"text-success"},O={class:"input-group input-group-sm"},j=["disabled","onChange","onUpdate:modelValue"],V={class:"input-group-text"},h={class:"text-end"},N={key:0,class:"text-success"},E=Object(a["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),v={class:"text-end"},f={key:0},g=Object(a["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),C={class:"text-end text-success"},x={class:"input-group mb-3 input-group-sm"},y={class:"input-group-append"},k=Object(a["createElementVNode"])("h3",{class:"text-center mb-5"}," 填寫訂購人資訊 ",-1),w={class:"mb-3"},B=Object(a["createElementVNode"])("label",{for:"email",class:"form-label"},"Email *",-1),_={class:"mb-3"},L=Object(a["createElementVNode"])("label",{for:"name",class:"form-label"},"訂購人姓名 *",-1),$={class:"mb-3"},I=Object(a["createElementVNode"])("label",{for:"tel",class:"form-label"},"訂購人電話 *",-1),S={class:"mb-3"},q=Object(a["createElementVNode"])("label",{for:"address",class:"form-label"},"訂購人地址 *",-1),D={class:"mb-3"},M=Object(a["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1),U=Object(a["createElementVNode"])("div",{class:"text-end"},[Object(a["createElementVNode"])("button",{class:"btn btn-primary"},"送出訂單")],-1);function T(e,t,c,b,T,z){const F=Object(a["resolveComponent"])("Loading"),J=Object(a["resolveComponent"])("Field"),A=Object(a["resolveComponent"])("ErrorMessage"),G=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(F,{active:e.isLoading},{default:Object(a["withCtx"])(()=>[l]),_:1},8,["active"]),Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",s,[n,Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("table",r,[i,Object(a["createElementVNode"])("tbody",null,[T.cart.carts?(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(T.cart.carts,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t.id},[Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:T.status.loadingItem===t.id,onClick:Object(a["withModifiers"])(e=>z.removeCartItem(t.id),["prevent"])},u,8,m)]),Object(a["createElementVNode"])("td",null,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",p," 已套用優惠券 ")):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",O,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"number",class:"form-control",min:"1",disabled:t.id===T.status.loadingItem,onChange:e=>z.updateCart(t),"onUpdate:modelValue":e=>t.qty=e},null,40,j),[[a["vModelText"],t.qty,void 0,{number:!0}]]),Object(a["createElementVNode"])("div",V,"/ "+Object(a["toDisplayString"])(t.product.unit),1)])]),Object(a["createElementVNode"])("td",h,[T.cart.final_total!==T.cart.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("small",N,"折扣價：")):Object(a["createCommentVNode"])("",!0),Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(e.$filters.currency(t.final_total)),1)])]))),128)):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("tfoot",null,[Object(a["createElementVNode"])("tr",null,[E,Object(a["createElementVNode"])("td",v,Object(a["toDisplayString"])(e.$filters.currency(T.cart.total)),1)]),T.cart.final_total!==T.cart.total?(Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",f,[g,Object(a["createElementVNode"])("td",C,Object(a["toDisplayString"])(e.$filters.currency(T.cart.final_total)),1)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createElementVNode"])("div",x,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>T.coupon_code=e),placeholder:"請輸入優惠碼"},null,512),[[a["vModelText"],T.coupon_code]]),Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=Object(a["withModifiers"])((...e)=>z.addCouponCode&&z.addCouponCode(...e),["prevent"]))}," 套用優惠碼 ")])])])]),Object(a["createVNode"])(G,{class:"col-lg-6 col-md-12 col-sm-12 px-5",onSubmit:z.createOrder},{default:Object(a["withCtx"])(({errors:e})=>[k,Object(a["createElementVNode"])("div",w,[B,Object(a["createVNode"])(J,{id:"email",name:"email",type:"email",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:T.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=e=>T.form.user.email=e)},null,8,["class","modelValue"]),Object(a["createVNode"])(A,{name:"email",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",_,[L,Object(a["createVNode"])(J,{id:"name",name:"姓名",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:T.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=e=>T.form.user.name=e)},null,8,["class","modelValue"]),Object(a["createVNode"])(A,{name:"姓名",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",$,[I,Object(a["createVNode"])(J,{id:"tel",name:"電話",type:"tel",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:T.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=e=>T.form.user.tel=e)},null,8,["class","modelValue"]),Object(a["createVNode"])(A,{name:"電話",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",S,[q,Object(a["createVNode"])(J,{id:"address",name:"地址",type:"text",class:Object(a["normalizeClass"])(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:T.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=e=>T.form.user.address=e)},null,8,["class","modelValue"]),Object(a["createVNode"])(A,{name:"地址",class:"invalid-feedback"})]),Object(a["createElementVNode"])("div",D,[M,Object(a["withDirectives"])(Object(a["createElementVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[6]||(t[6]=e=>T.form.message=e)},null,512),[[a["vModelText"],T.form.message]])]),U]),_:1},8,["onSubmit"])])],64)}c("14d9");var z={data(){return{cart:{},coupon_code:"",status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{removeCartItem(e){this.status.loadingItem=e;const t="https://vue3-course-api.hexschool.io/api/store-api/cart/"+e;this.isLoading=!0,this.$http.delete(t).then(e=>{this.$httpMessageState(e,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1})},updateCart(e){const t="https://vue3-course-api.hexschool.io/api/store-api/cart/"+e.id;this.isLoading=!0,this.status.loadingItem=e.id;const c={product_id:e.product_id,qty:e.qty};this.$http.put(t,{data:c}).then(e=>{this.status.loadingItem="",this.getCart(),this.isLoading=!1})},getCart(){const e="https://vue3-course-api.hexschool.io/api/store-api/cart";this.isLoading=!0,this.$http.get(e).then(e=>{this.cart=e.data.data,this.isLoading=!1})},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/store-api/coupon",t={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:t}).then(e=>{this.$httpMessageState(e,"套用優惠碼"),this.getCart(),this.isLoading=!1})},createOrder(){const e="https://vue3-course-api.hexschool.io/api/store-api/order",t=this.form;this.$http.post(e,{data:t}).then(e=>{let t=e.data.orderId;this.$router.push("/user/checkout/"+t)})}},created(){this.getCart()}},F=(c("c621"),c("6b0d")),J=c.n(F);const A=J()(z,[["render",T]]);t["default"]=A},c621:function(e,t,c){"use strict";c("5547")}}]);
//# sourceMappingURL=chunk-6b495aa9.2b4546bc.js.map