(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8493e2a"],{"6ed3":function(e,t,c){},"863b":function(e,t,c){"use strict";c("6ed3")},f962:function(e,t,c){"use strict";c.r(t);var o=c("7a23");const a=Object(o["createElementVNode"])("div",{class:"loadingio-spinner-spin-69aofg588hf"},[Object(o["createElementVNode"])("div",{class:"ldio-4g11ls18ra"},[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div")])])],-1),l={class:"container userPage"},n={class:"dropdown text-end mb-3"},d=Object(o["createElementVNode"])("a",{type:"button position-relative p-2","data-bs-toggle":"dropdown","data-bs-auto-close":"outside"},[Object(o["createElementVNode"])("i",{class:"bi bi-cart-fill"})],-1),s={class:"dropdown-menu p-2 overflow-auto"},i=Object(o["createElementVNode"])("p",{class:"text-center mt-2 mb-5"},"購物車清單",-1),r={class:"col-md-12"},b={class:"sticky-top"},u={class:"table align-middle"},m=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",null,[Object(o["createElementVNode"])("th"),Object(o["createElementVNode"])("th",null,"品名"),Object(o["createElementVNode"])("th",{style:{width:"110px"}},"數量"),Object(o["createElementVNode"])("th",null,"單價")])],-1),p=["disabled","onClick"],j=Object(o["createElementVNode"])("i",{class:"bi bi-trash3-fill"},null,-1),O=[j],h={key:0,class:"text-success"},V={class:"input-group input-group-sm"},N=["disabled","onChange","onUpdate:modelValue"],g={class:"input-group-text"},E={class:"text-end"},v={key:0,class:"text-success"},y=Object(o["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),k={class:"text-end"},C={key:0},x=Object(o["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),f={class:"text-end text-success"},w={class:"input-group mb-3 input-group-sm"},B={class:"input-group-append"},I=["disabled"],D={"aria-label":"breadcrumb"},S={class:"breadcrumb"},_={class:"breadcrumb-item"},L=Object(o["createTextVNode"])("商城"),$={class:"breadcrumb-item active","aria-current":"page"},q={class:"row justify-content-center"},T={class:"col-lg-7 col-md-12 col-sm-12 mt-3 mb-5"},M=["src"],U={class:"col-lg-5 col-md-12 col-sm-12 px-5"},P={class:"mb-4"},F={class:"mb-5"},J={class:"mb-4"},z={key:0,class:"h5"},A={key:1,class:"h6"},G={key:2,class:"h5"},H=Object(o["createElementVNode"])("hr",null,null,-1),K={class:"input-group input-group-sm mb-3"},Q={class:"input-group-text"},R=["disabled"],W={key:0,class:"spinner-grow spinner-grow-sm text-white",role:"status"},X=Object(o["createElementVNode"])("span",{class:"visually-hidden"},"Loading...",-1),Y=[X],Z=Object(o["createElementVNode"])("i",{class:"bi bi-cart-plus"},null,-1),ee=Object(o["createTextVNode"])(" 帶商品回家 ");function te(e,t,c,j,X,te){const ce=Object(o["resolveComponent"])("Loading"),oe=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(ce,{active:e.isLoading},{default:Object(o["withCtx"])(()=>[a]),_:1},8,["active"]),Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",n,[d,Object(o["createElementVNode"])("div",s,[i,Object(o["createElementVNode"])("div",r,[Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("table",u,[m,Object(o["createElementVNode"])("tbody",null,[X.cart.carts?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:0},Object(o["renderList"])(X.cart.carts,t=>(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t.id},[Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",disabled:X.status.loadingItem===t.id,onClick:e=>te.removeCartItem(t.id)},O,8,p)]),Object(o["createElementVNode"])("td",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h," 已套用優惠券 ")):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("td",null,[Object(o["createElementVNode"])("div",V,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"number",class:"form-control",min:"1",disabled:t.id===X.status.loadingItem,onChange:e=>te.updateCart(t),"onUpdate:modelValue":e=>t.qty=e},null,40,N),[[o["vModelText"],t.qty,void 0,{number:!0}]]),Object(o["createElementVNode"])("div",g,"/ "+Object(o["toDisplayString"])(t.product.unit),1)])]),Object(o["createElementVNode"])("td",E,[X.cart.final_total!==X.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("small",v,"折扣價：")):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.$filters.currency(t.final_total)),1)])]))),128)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("tfoot",null,[Object(o["createElementVNode"])("tr",null,[y,Object(o["createElementVNode"])("td",k,Object(o["toDisplayString"])(e.$filters.currency(X.cart.total)),1)]),X.cart.final_total!==X.cart.total?(Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",C,[x,Object(o["createElementVNode"])("td",f,Object(o["toDisplayString"])(e.$filters.currency(X.cart.final_total)),1)])):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("div",w,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>X.coupon_code=e),placeholder:"請輸入優惠碼"},null,512),[[o["vModelText"],X.coupon_code]]),Object(o["createElementVNode"])("div",B,[Object(o["createElementVNode"])("button",{class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=(...e)=>te.addCouponCode&&te.addCouponCode(...e))}," 套用優惠碼 ")])]),Object(o["createElementVNode"])("button",{class:"btn btn-primary mb-2 w-100",type:"button",disabled:0===X.cart.total,onClick:t[2]||(t[2]=(...e)=>te.goInfo&&te.goInfo(...e))},"結帳去",8,I)])])])]),Object(o["createElementVNode"])("nav",D,[Object(o["createElementVNode"])("ol",S,[Object(o["createElementVNode"])("li",_,[Object(o["createVNode"])(oe,{to:"/user/cart",class:"breadcrumb-item-a"},{default:Object(o["withCtx"])(()=>[L]),_:1})]),Object(o["createElementVNode"])("li",$,Object(o["toDisplayString"])(X.product.title),1)])]),Object(o["createElementVNode"])("div",q,[Object(o["createElementVNode"])("article",T,[Object(o["createElementVNode"])("img",{src:X.product.imageUrl,class:"img-fluid"},null,8,M)]),Object(o["createElementVNode"])("div",U,[Object(o["createElementVNode"])("h2",P,Object(o["toDisplayString"])(X.product.title),1),Object(o["createElementVNode"])("pre",F,Object(o["toDisplayString"])(X.product.description),1),Object(o["createElementVNode"])("pre",J,Object(o["toDisplayString"])(X.product.content),1),X.product.price?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",z,Object(o["toDisplayString"])(X.product.origin_price)+" 元",1)),X.product.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("del",A,"市價 "+Object(o["toDisplayString"])(X.product.origin_price)+" 元",1)):Object(o["createCommentVNode"])("",!0),X.product.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",G,"限時下殺 "+Object(o["toDisplayString"])(X.product.price)+" 元",1)):Object(o["createCommentVNode"])("",!0),H,Object(o["createElementVNode"])("div",K,[Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":t[3]||(t[3]=e=>X.qty=e)},null,512),[[o["vModelText"],X.qty,void 0,{number:!0}]]),Object(o["createElementVNode"])("div",Q,"/ "+Object(o["toDisplayString"])(X.product.unit),1)]),Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-primary btn-lg",onClick:t[4]||(t[4]=e=>te.addToCart(X.product.id,X.qty)),disabled:this.status.loadingItem===X.product.id},[this.status.loadingItem===X.product.id?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",W,Y)):Object(o["createCommentVNode"])("",!0),Z,ee],8,R)])])])],64)}c("14d9");var ce={data(){return{product:{},id:"",status:{loadingItem:""},cart:{},qty:1,coupon_code:""}},methods:{getProduct(){const e="https://vue3-course-api.hexschool.io/api/store-api/product/"+this.id;this.isLoading=!0,this.$http.get(e).then(e=>{this.isLoading=!1,e.data.success&&(this.product=e.data.product)})},addToCart(e,t){const c="https://vue3-course-api.hexschool.io/api/store-api/cart";this.status.loadingItem=e;const o={product_id:e,qty:t};this.$http.post(c,{data:o}).then(e=>{this.status.loadingItem="",this.getCart()})},removeCartItem(e){this.status.loadingItem=e;const t="https://vue3-course-api.hexschool.io/api/store-api/cart/"+e;this.isLoading=!0,this.$http.delete(t).then(e=>{this.$httpMessageState(e,"移除購物車品項"),this.status.loadingItem="",this.getCart(),this.isLoading=!1})},updateCart(e){const t="https://vue3-course-api.hexschool.io/api/store-api/cart/"+e.id;this.isLoading=!0,this.status.loadingItem=e.id;const c={product_id:e.product_id,qty:e.qty};this.$http.put(t,{data:c}).then(e=>{this.status.loadingItem="",this.getCart(),this.isLoading=!1})},getCart(){const e="https://vue3-course-api.hexschool.io/api/store-api/cart";this.isLoading=!0,this.$http.get(e).then(e=>{this.cart=e.data.data,this.isLoading=!1})},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/store-api/coupon",t={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:t}).then(e=>{this.$httpMessageState(e,"套用優惠碼"),this.getCart(),this.isLoading=!1})},goInfo(){this.$router.push("/user/information")}},created(){this.id=this.$route.params.productId,this.getProduct(),this.getCart()}},oe=(c("863b"),c("6b0d")),ae=c.n(oe);const le=ae()(ce,[["render",te]]);t["default"]=le}}]);
//# sourceMappingURL=chunk-a8493e2a.b3f8c058.js.map